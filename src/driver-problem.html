<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../bower_components/voice-elements/dist/voice-recognition.html">
<dom-module id="driver-problem">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }

      paper-button.Stop {
    background-color: var(--paper-red-500);
    color: white;
  }
   paper-button.Speak {
    background-color: var(--paper-blue-500);
    color: white;
  }
    </style>
    <paper-button raised  class="custom yellow" onclick="window.history.back()" >Back</paper-button>

    <div class="card" >
      <h1>Problem : [[document.Small_Label]] </h1>
      <paper-textarea label="type your problem" class="speech-input" value="{{document.Problem}}"></paper-textarea>
        <paper-button raised  class$="custom {{speakText}}" on-click="_speak" >[[speakText]]</paper-button>
        <voice-recognition  id="voice" text="{{document.Problem}}"></voice-recognition>
      <br>
         <br>
      <paper-button raised   class="custom green"   on-click="_saveProblem" >Save</paper-button>
      </div>
 
  </template>

  <script>
    Polymer({
      is: 'driver-problem',
       properties: {

        document:Object,
        speaking : {
          type: Boolean,
          value: false
        }, 
        speakText: {
          type: String,
          value: 'Speak'
        }, 

      },
      _saveProblem:function(){
    
   debugger;
    if(this.document.Problem.length>0){
       this.document.Dirty = true;
   }else{
      this.document.Dirty = 0;
   }
      this.fire('toast','Done');
       this.fire('save-document-problem', this.document);
  
 
      },
      _speak : function(){
    if(this.speaking){
      this.$.voice.stop();
    }else{
        this.$.voice.start();
    }
    debugger;
    this.speaking = !this.speaking;
    this.speakText =  this.speaking? 'Stop' :'Speak';
      }
     
    
    });
  </script>
</dom-module>
